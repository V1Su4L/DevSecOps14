pipeline{
    agent any
    environment {
        // env_name = env_value
        FOLDER_NAME=big-button-react-app
        GITHUB_USERNAME=devopsPRO27
        CODE_DIR='movie-land'
        IMAGE_NAME='${FOLDER_NAME}:v1.${BUILD_NUMBER}'
    }

    stages{
        stage("Clonning"){
            steps{
                sh 'git clone https://github.com/${GITHUB_USERNAME}/${DIRECTORY_NAME}'
                }
                }
            }
        }
        stage("Build Docker Image"){
            steps{
                dir(${FOLDER_NAME}){
                    dir({CODE_DIR}){
                        sh 'docker build -t ${IMAGE_NAME} .'
            }
        }
    }
        stage("Pushing Image"){
            steps{
                sh 'docker save ${IMAGE_NAME} > ${FOLDER_NAME}.tar'
            }
        }
}